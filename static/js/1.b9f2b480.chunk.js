(window["webpackJsonp@magnit/frontend"]=window["webpackJsonp@magnit/frontend"]||[]).push([[1],{341:function(t,e,n){"use strict";var c=n(46),r=n(12),a=n(334);function o(){var t=Object(c.a)(["\n                width: 100%;\n                min-height: 100vh;\n            "]);return o=function(){return t},t}var i=function(t){var e=t.children;return Object(r.jsx)(a.a,{container:!0,direction:"column",css:Object(r.css)(o())},e)};n.d(e,"a",function(){return i})},342:function(t,e,n){"use strict";var c=n(46),r=n(12),a=n(334),o=n(146),i=n(237);function s(){var t=Object(c.a)(["\n                    height: 100%;\n                    display: flex;\n                    align-items: center;\n                    box-shadow: none !important;\n                "]);return s=function(){return t},t}function u(){var t=Object(c.a)(["\n                height: var(--section-title-height);\n                box-shadow: 0 6px 20px rgba(220, 227, 235, 0.3);\n            "]);return u=function(){return t},t}var j=function(t){var e=t.title,n=t.children;return Object(r.jsx)(a.a,{item:!0,css:Object(r.css)(u())},Object(r.jsx)(o.a,{square:!0,css:Object(r.css)(s())},Object(r.jsx)(a.a,{container:!0,css:function(t){return{paddingLeft:t.spacing(4),paddingRight:t.spacing(4)}}},Object(r.jsx)(a.a,{item:!0,xs:!0},Object(r.jsx)(i.a,{variant:"h4",component:"div"},Object(r.jsx)("span",null,e))),n)))};n.d(e,"a",function(){return j})},343:function(t,e,n){"use strict";var c=n(46),r=n(344),a=n(338),o=n(241),i=n(331),s=n(12),u=n(126),j=n(124),l=n(125);function b(){var t=Object(c.a)(["\n                            display: flex;\n                            align-items: center;\n                        "]);return b=function(){return t},t}var p=function(t){var e=t.messages,n=t.error,c=t.open,p=Object(r.a)(t,["messages","error","open"]);return Object(s.jsx)(a.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:c,autoHideDuration:2500,onClose:p.onClose},Object(s.jsx)(o.a,{css:function(t){return{background:n?t.colors.red:t.colors.green,boxShadow:"0 4px 8px ".concat(n?t.colors.red:t.colors.green,"50")}},message:Object(s.jsx)("span",{css:Object(s.css)(b())},n?Object(s.jsx)(u.a,{css:function(t){return{marginRight:t.spacing(1)}}}):Object(s.jsx)(j.a,{css:function(t){return{marginRight:t.spacing(1)}}}),n?e.error:e.success),action:[Object(s.jsx)(i.a,{key:"close",color:"inherit",onClick:p.onClose},Object(s.jsx)(l.a,null))]}))};n.d(e,"a",function(){return p})},344:function(t,e,n){"use strict";function c(t,e){if(null==t)return{};var n,c,r=function(t,e){if(null==t)return{};var n,c,r={},a=Object.keys(t);for(c=0;c<a.length;c++)n=a[c],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(c=0;c<a.length;c++)n=a[c],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}n.d(e,"a",function(){return c})},345:function(t,e,n){"use strict";var c=n(334),r=n(237),a=n(12),o=n(46);function i(){var t=Object(o.a)(["\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n            "]);return i=function(){return t},t}var s=function(t){var e=t.children;return Object(a.jsx)(c.a,{item:!0,xs:!0,css:Object(a.css)(i())},e)},u=function(t){var e=t.title,n=t.button,o=t.children;return Object(a.jsx)(s,null,Object(a.jsx)(c.a,{container:!0,justify:"center",alignContent:"center",direction:"column"},Object(a.jsx)(c.a,{item:!0,css:function(t){return{marginBottom:t.spacing(3)}}},Object(a.jsx)(r.a,{component:"div",align:"center",css:function(t){return{color:t.colors.black,fontWeight:500,fontSize:t.fontSize.xLarge}}},Object(a.jsx)("span",null,e))),Object(a.jsx)(c.a,{item:!0,css:function(t){return{marginBottom:t.spacing(3)}}},Object(a.jsx)(r.a,{component:"div",align:"center",css:function(t){return{color:t.colors.secondary,fontSize:t.colors.larger}}},o)),Object(a.jsx)(c.a,{item:!0},Object(a.jsx)(c.a,{container:!0,justify:"center",alignContent:"center"},Object(a.jsx)(c.a,{item:!0},n)))))};n.d(e,"a",function(){return u})},348:function(t,e,n){"use strict";n.r(e);var c=n(104),r=n(86),a=n(12),o=n(0),i=n(342),s=n(341),u=n(52),j=n(149),l=n(51),b=n(345),p=n(106),O=n(103),f=n(334),d=n(237),x=n(146),m=n(23),h=n.n(m),g=n(150),v=[{key:"title",sortable:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},{key:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{key:"createdAt",label:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"},{key:"updatedAt",label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"}],y=function(){var t=Object(o.useContext)(O.a),e=Object(o.useState)([]),n=Object(r.a)(e,2),m=n[0],y=n[1],w=Object(o.useState)({redirect:!1,to:""}),k=Object(r.a)(w,2),C=k[0],S=k[1];Object(o.useEffect)(function(){Object(p.c)(t.courier).then(function(t){t.templates=t.templates.map(function(t){return Object(c.a)({},t,{createdAt:Object(g.getFriendlyDate)(new Date(t.createdAt),!0),updatedAt:Object(g.getFriendlyDate)(new Date(t.updatedAt),!0)})}),y(t.templates)}).catch(console.error)},[t.courier]);var T=!m.length;return Object(a.jsx)(s.a,null,C.redirect&&Object(a.jsx)(u.Redirect,{to:"templates/edit/".concat(C.to),noThrow:!0}),Object(a.jsx)(i.a,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432"},Object(a.jsx)(f.a,{item:!0,hidden:T},Object(a.jsx)(j.Button,{component:u.Link,to:"create",variant:"contained",scheme:"blue"},Object(a.jsx)(l.AddIcon,null),Object(a.jsx)(d.a,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d")))),T&&Object(a.jsx)(b.a,{title:"\u0428\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435\u0442",button:Object(a.jsx)(j.Button,{component:u.Link,to:"create",scheme:"blue"},Object(a.jsx)(l.AddIcon,null),Object(a.jsx)(d.a,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d"))},Object(a.jsx)("div",null,"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443"),Object(a.jsx)("div",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d")),!T&&Object(a.jsx)(x.a,{square:!0,css:function(t){return{margin:t.spacing(3),boxShadow:"0 0 ".concat(t.spacing(2)," ").concat(t.colors.lightGray," !important")}}},Object(a.jsx)(f.a,{container:!0,direction:"row",css:function(t){return{marginTop:t.spacing(2)}}},Object(a.jsx)(f.a,{container:!0,direction:"column",css:function(t){return{padding:t.spacing(3)}}},Object(a.jsx)(f.a,{container:!0,direction:"row",spacing:2},Object(a.jsx)(f.a,{item:!0,xs:!0},Object(a.jsx)(j.InputField,{placeholder:"\u041f\u043e\u0438\u0441\u043a ...",fullWidth:!0,css:function(t){return{borderRadius:t.radius(5),background:t.colors.white,border:"1px solid ".concat(t.colors.lightGray),transition:"border 0.25s ease-in-out",cursor:"pointer",":hover, :active":{border:"1px solid ".concat(t.colors.primary)},div:{":before, :after":{border:"none !important"}},input:{padding:"".concat(t.spacing(2)," ").concat(t.spacing(4))}}}}))),Object(a.jsx)(f.a,{item:!0,css:function(t){return{padding:t.spacing(3)}}},Object(a.jsx)(j.TableWrapper,{columns:v,data:m,onRowClick:function(t){h.a.isObject(t)&&h.a.has(t,"id")&&S({redirect:!0,to:h.a.get(t,"id")})}}))))))},w=n(11),k=n.n(w),C=n(15),S=n(67),T=n(343),A=n(107),D=function(){var t=Object(o.useContext)(O.a),e=Object(o.useState)({}),n=Object(r.a)(e,2),b=n[0],x=n[1],m=Object(o.useState)(!1),g=Object(r.a)(m,2),v=g[0],y=g[1],w=Object(o.useState)(!1),D=Object(r.a)(w,2),E=D[0],R=D[1],I=Object(o.useState)(!1),W=Object(r.a)(I,2),B=W[0],F=W[1];function L(){return(L=Object(C.a)(k.a.mark(function e(n){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(A.b)(t.courier,n).then(function(t){return Object(c.a)({},t,{filename:"".concat("http://localhost:1337","/").concat(t.filename)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(){return(z=Object(C.a)(k.a.mark(function e(n){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(A.a)(t.courier,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(a.jsx)(s.a,null,B&&Object(a.jsx)(u.Redirect,{to:"/templates",noThrow:!0}),Object(a.jsx)(i.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(a.jsx)(f.a,{item:!0},Object(a.jsx)(j.Button,{variant:"contained",scheme:"green",onClick:function(){Object(p.a)(t.courier,b).then(function(){return R(!0)}).catch(function(){R(!0),y(!0)})}},Object(a.jsx)(l.CheckIcon,null),Object(a.jsx)(d.a,null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))),Object(a.jsx)(f.a,{css:function(t){return{maxWidth:t.maxTemplateWidth,margin:t.spacing(4),position:"relative",opacity:E?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:E?"none":"initial"}}},Object(a.jsx)(S.TemplateEditor,{css:function(t){return{background:t.colors.main}},onChange:function(t){x(h.a.cloneDeep(t))},onAddAsset:function(t){return L.apply(this,arguments)},onDeleteAsset:function(t){return z.apply(this,arguments)}})),Object(a.jsx)(T.a,{open:E,error:v,onClose:function(t,e){"clickaway"!==e&&(v||F(!0),R(!1),setTimeout(function(){return y(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))},E=n(69),R=function(t){var e=t.templateId,n=Object(o.useContext)(O.a),b=Object(o.useState)({}),p=Object(r.a)(b,2),x=p[0],m=p[1],g=Object(o.useState)(!1),v=Object(r.a)(g,2),y=v[0],w=v[1],A=Object(o.useState)(!1),D=Object(r.a)(A,2),R=D[0],I=D[1],W=Object(o.useState)(!1),B=Object(r.a)(W,2),F=B[0],L=B[1];function z(){return(z=Object(C.a)(k.a.mark(function t(e){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(E.uploadFile)(n.courier,e).then(function(t){return Object(c.a)({},t,{filename:"".concat("http://localhost:1337","/").concat(t.filename)})}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function q(){return(q=Object(C.a)(k.a.mark(function t(e){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(E.deleteFile)(n.courier,e));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}return Object(o.useEffect)(function(){Object(E.getTemplate)(n.courier,e).then(function(t){return m(t.template)}).catch(console.error)},[n.courier,e]),Object(a.jsx)(s.a,null,F&&Object(a.jsx)(u.Redirect,{to:"/templates",noThrow:!0}),Object(a.jsx)(i.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(a.jsx)(f.a,{item:!0},Object(a.jsx)(j.Button,{variant:"contained",scheme:"blue",onClick:function(){Object(E.updateTemplate)(n.courier,e,x).then(function(){return I(!0)}).catch(function(){I(!0),w(!0)})}},Object(a.jsx)(l.CheckIcon,null),Object(a.jsx)(d.a,null,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")))),Object(a.jsx)(f.a,{css:function(t){return{maxWidth:t.maxTemplateWidth,margin:t.spacing(4),position:"relative",opacity:R?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:R?"none":"initial"}}},!h.a.isEmpty(x)&&Object(a.jsx)(S.TemplateEditor,{initialState:x,css:function(t){return{background:t.colors.main}},onChange:function(t){m(h.a.cloneDeep(t))},onAddAsset:function(t){return z.apply(this,arguments)},onDeleteAsset:function(t){return q.apply(this,arguments)}})),Object(a.jsx)(T.a,{open:R,error:y,onClose:function(t,e){"clickaway"!==e&&(y||L(!0),I(!1),setTimeout(function(){return w(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))};n.d(e,"TemplateList",function(){return y}),n.d(e,"CreateTemplate",function(){return D}),n.d(e,"EditTemplate",function(){return R})}}]);
//# sourceMappingURL=1.b9f2b480.chunk.js.map