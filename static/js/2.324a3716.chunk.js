(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{258:function(module,exports,__webpack_require__){var n;window,n=function(__WEBPACK_EXTERNAL_MODULE__4__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(module,exports,__webpack_require__){"use strict";eval('\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    "default": mod\n  };\n};\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar lodash_1 = __importDefault(__webpack_require__(4));\n\nvar EditorServiceImpl = function () {\n  function EditorServiceImpl(focusedPuzzleState, toolbarTopPositionState) {\n    var _this = this;\n\n    this.focusedPuzzleState = focusedPuzzleState;\n    this.toolbarTopPositionState = toolbarTopPositionState;\n    var wait = 100;\n    this.throttledChainCleaning = lodash_1["default"].throttle(function () {\n      var focusedPuzzleChain = _this.focusedPuzzleState[0];\n      focusedPuzzleChain.length = 0;\n    }, wait);\n  }\n\n  EditorServiceImpl.prototype.onPuzzleFocus = function (id) {\n    var _a = this.focusedPuzzleState,\n        focusedPuzzleChain = _a[0],\n        setFocusedPuzzleChain = _a[1];\n    this.throttledChainCleaning();\n\n    if (focusedPuzzleChain.includes(id)) {\n      setFocusedPuzzleChain(focusedPuzzleChain.slice());\n      return;\n    }\n\n    focusedPuzzleChain.push(id);\n    setFocusedPuzzleChain(focusedPuzzleChain.slice());\n  };\n\n  EditorServiceImpl.prototype.onPuzzleBlur = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  EditorServiceImpl.prototype.updateToolbarTopPosition = function () {\n    var focusedPuzzleChain = this.focusedPuzzleState[0];\n    var _a = this.toolbarTopPositionState,\n        setToolbarTopPosition = _a[1];\n\n    if (!focusedPuzzleChain.length) {\n      return;\n    }\n\n    var focusedPuzzleId = lodash_1["default"].head(focusedPuzzleChain);\n\n    if (!focusedPuzzleId) {\n      return;\n    }\n\n    var element = document.getElementById(focusedPuzzleId);\n\n    if (!element) {\n      return;\n    }\n\n    var top = element.getBoundingClientRect().top;\n    setToolbarTopPosition(window.scrollY + top - 128);\n  };\n\n  return EditorServiceImpl;\n}();\n\nexports.EditorServiceImpl = EditorServiceImpl;\n\n//# sourceURL=webpack://TemplateEditor/./src/editor/EditorServiceImpl.ts?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\n__export(__webpack_require__(2));\n\n__export(__webpack_require__(6));\n\n__export(__webpack_require__(9));\n\n//# sourceURL=webpack://TemplateEditor/./src/index.ts?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar TaskEditorService_1 = __webpack_require__(3);\n\nvar TemplateEditorService_1 = __webpack_require__(5);\n\nvar EditorServiceImpl_1 = __webpack_require__(0);\n\nvar EEditorType;\n\n(function (EEditorType) {\n  EEditorType[EEditorType["TEMPLATE"] = 0] = "TEMPLATE";\n  EEditorType[EEditorType["TASK"] = 1] = "TASK";\n})(EEditorType = exports.EEditorType || (exports.EEditorType = {}));\n\nfunction getEditorService(type, args) {\n  switch (type) {\n    case EEditorType.TASK:\n      return new (TaskEditorService_1.TaskEditorService.bind.apply(TaskEditorService_1.TaskEditorService, [void 0].concat(args)))();\n\n    case EEditorType.TEMPLATE:\n      return new (TemplateEditorService_1.TemplateEditorService.bind.apply(TemplateEditorService_1.TemplateEditorService, [void 0].concat(args)))();\n\n    default:\n      console.log("%c%s", "color:" + "#F07178", "Current type (" + type + ") service does not exist!");\n      return new (EditorServiceImpl_1.EditorServiceImpl.bind.apply(EditorServiceImpl_1.EditorServiceImpl, [void 0].concat(args)))();\n  }\n}\n\nexports.getEditorService = getEditorService;\n\n//# sourceURL=webpack://TemplateEditor/./src/editor/index.ts?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar EditorServiceImpl_1 = __webpack_require__(0);\n\nvar TaskEditorService = function (_super) {\n  __extends(TaskEditorService, _super);\n\n  function TaskEditorService() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return TaskEditorService;\n}(EditorServiceImpl_1.EditorServiceImpl);\n\nexports.TaskEditorService = TaskEditorService;\n\n//# sourceURL=webpack://TemplateEditor/./src/editor/TaskEditorService.ts?')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__4__;\n\n//# sourceURL=webpack://TemplateEditor/external_%22lodash%22?")},function(module,exports,__webpack_require__){"use strict";eval('\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar EditorServiceImpl_1 = __webpack_require__(0);\n\nvar TemplateEditorService = function (_super) {\n  __extends(TemplateEditorService, _super);\n\n  function TemplateEditorService() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return TemplateEditorService;\n}(EditorServiceImpl_1.EditorServiceImpl);\n\nexports.TemplateEditorService = TemplateEditorService;\n\n//# sourceURL=webpack://TemplateEditor/./src/editor/TemplateEditorService.ts?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\n__export(__webpack_require__(7));\n\n__export(__webpack_require__(8));\n\n//# sourceURL=webpack://TemplateEditor/./src/entities/index.ts?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nvar ETerminals;\n\n(function (ETerminals) {\n  ETerminals["EMPTY"] = "";\n})(ETerminals = exports.ETerminals || (exports.ETerminals = {}));\n\n//# sourceURL=webpack://TemplateEditor/./src/entities/ETerminals.ts?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nvar EPuzzleType;\n\n(function (EPuzzleType) {\n  EPuzzleType["GROUP"] = "group";\n  EPuzzleType["QUESTION"] = "question";\n  EPuzzleType["RADIO_ANSWER"] = "radio_answer";\n  EPuzzleType["CHECKBOX_ANSWER"] = "checkbox_answer";\n  EPuzzleType["DROPDOWN_ANSWER"] = "dropdown_answer";\n  EPuzzleType["REFERENCE_ANSWER"] = "reference_answer";\n  EPuzzleType["UPLOAD_FILES"] = "upload_files";\n  EPuzzleType["DATE_ANSWER"] = "date_answer";\n  EPuzzleType["TEXT_ANSWER"] = "text_answer";\n  EPuzzleType["NUMERIC_ANSWER"] = "numeric_answer";\n})(EPuzzleType = exports.EPuzzleType || (exports.EPuzzleType = {}));\n\n//# sourceURL=webpack://TemplateEditor/./src/entities/EPuzzleType.ts?')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nfunction getFriendlyDate(date) {\n  var day = normalizeDateNumber(date.getDate());\n  var month = normalizeDateNumber(date.getMonth() + 1);\n  var year = date.getFullYear();\n  return day + "." + month + "." + year;\n}\n\nexports.getFriendlyDate = getFriendlyDate;\n\nfunction normalizeDateNumber(number) {\n  if (number.toString().length === 1) {\n    return "0" + number;\n  }\n\n  return number.toString();\n}\n\n//# sourceURL=webpack://TemplateEditor/./src/date/index.ts?')}])},module.exports=n(__webpack_require__(19))},259:function(e,t,n){"use strict";n.r(t);var r=n(49),o=n(120),i=n(97),c=n(12),a=n(0),s=n(253),u=n(254),p=n(55),l=n(252),d=n(54),_=n(256),b=n(119),f=n(118),m=n(131),j=n(88),E=n(19),v=n.n(E),x=n(258);function O(){var e=Object(r.a)(["\n                                width: 180px;\n                            "]);return O=function(){return e},e}function T(){var e=Object(r.a)(["\n                            width: 180px;\n                        "]);return T=function(){return e},e}var h=[{key:"title",sortable:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},{key:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{key:"createdAt",label:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"},{key:"updatedAt",label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"}],y=function(){var e=Object(a.useContext)(f.a),t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],E=n[1],y=Object(a.useState)({redirect:!1,to:""}),S=Object(i.a)(y,2),z=S[0],g=S[1];Object(a.useEffect)(function(){Object(b.c)(e.courier).then(function(e){e.templates=e.templates.map(function(e){return Object(o.a)({},e,{createdAt:Object(x.getFriendlyDate)(new Date(e.createdAt)),updatedAt:Object(x.getFriendlyDate)(new Date(e.updatedAt))})}),E(e.templates)}).catch(console.error)},[e.courier]);var w=!r.length;return Object(c.jsx)(u.a,null,z.redirect&&Object(c.jsx)(p.Redirect,{to:"templates/edit/".concat(z.to),noThrow:!0}),Object(c.jsx)(s.a,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432"},Object(c.jsx)(m.a,{item:!0,hidden:w},Object(c.jsx)(l.Button,{component:p.Link,to:"create",variant:"contained",title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d",scheme:"blue",icon:Object(c.jsx)(d.AddIcon,null),css:Object(c.css)(T())}))),w&&Object(c.jsx)(_.a,{title:"\u0428\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435\u0442",actionName:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d",button:Object(c.jsx)(l.Button,{component:p.Link,to:"create",icon:Object(c.jsx)(d.AddIcon,null),title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d",css:Object(c.css)(O())}),description:"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443"}),!w&&Object(c.jsx)(j.a,{square:!0,css:function(e){return{margin:e.spacing(3),boxShadow:"0 0 ".concat(e.spacing(2)," ").concat(e.colors.lightGray," !important")}}},Object(c.jsx)(m.a,{container:!0,direction:"row",css:function(e){return{marginTop:e.spacing(2)}}},Object(c.jsx)(m.a,{container:!0,direction:"column",css:function(e){return{padding:e.spacing(3)}}},Object(c.jsx)(m.a,{container:!0,direction:"row",spacing:2},Object(c.jsx)(m.a,{item:!0,xs:!0},Object(c.jsx)(l.InputField,{placeholder:"\u041f\u043e\u0438\u0441\u043a ...",fullWidth:!0,css:function(e){return{borderRadius:e.radius(5),background:e.colors.white,border:"1px solid ".concat(e.colors.lightGray),transition:"border 0.25s ease-in-out",cursor:"pointer",":hover, :active":{border:"1px solid ".concat(e.colors.primary)},div:{":before, :after":{border:"none !important"}},input:{padding:"".concat(e.spacing(2)," ").concat(e.spacing(4))}}}}))),Object(c.jsx)(m.a,{item:!0,css:function(e){return{padding:e.spacing(3)}}},Object(c.jsx)(l.TableWrapper,{columns:h,data:r,onRowClick:function(e){v.a.isObject(e)&&v.a.has(e,"id")&&g({redirect:!0,to:v.a.get(e,"id")})}}))))))},S=n(45),z=n(255),g=n(135),w=n(113),P=n(128),k=n(138),C=n(136),I=n(137);function R(){var e=Object(r.a)(["\n                            display: flex;\n                            align-items: center;\n                        "]);return R=function(){return e},e}var A=function(e){var t=e.messages,n=e.error,r=e.open,o=Object(z.a)(e,["messages","error","open"]);return Object(c.jsx)(g.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:r,autoHideDuration:2500,onClose:o.onClose},Object(c.jsx)(w.a,{css:function(e){return{background:n?e.colors.red:e.colors.green,boxShadow:"0 4px 8px ".concat(n?e.colors.red:e.colors.green,"50")}},message:Object(c.jsx)("span",{css:Object(c.css)(R())},n?Object(c.jsx)(k.a,{css:function(e){return{marginRight:e.spacing(1)}}}):Object(c.jsx)(C.a,{css:function(e){return{marginRight:e.spacing(1)}}}),n?t.error:t.success),action:[Object(c.jsx)(P.a,{key:"close",color:"inherit",onClick:o.onClose},Object(c.jsx)(I.a,null))]}))},D=function(){var e=Object(a.useContext)(f.a),t=Object(a.useState)({}),n=Object(i.a)(t,2),r=n[0],o=n[1],_=Object(a.useState)(!1),j=Object(i.a)(_,2),E=j[0],x=j[1],O=Object(a.useState)(!1),T=Object(i.a)(O,2),h=T[0],y=T[1],z=Object(a.useState)(!1),g=Object(i.a)(z,2),w=g[0],P=g[1];return Object(c.jsx)(u.a,null,w&&Object(c.jsx)(p.Redirect,{to:"/templates",noThrow:!0}),Object(c.jsx)(s.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(c.jsx)(m.a,{item:!0},Object(c.jsx)(l.Button,{variant:"contained",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",scheme:"blue",icon:Object(c.jsx)(d.CheckIcon,null),onClick:function(){Object(b.a)(e.courier,r).then(function(){return y(!0)}).catch(function(){y(!0),x(!0)})}}))),Object(c.jsx)(m.a,{css:function(e){return{maxWidth:e.maxTemplateWidth,margin:e.spacing(4),position:"relative",opacity:h?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:h?"none":"initial"}}},Object(c.jsx)(S.TemplateEditor,{css:function(e){return{background:e.colors.main}},onChange:function(e){o(v.a.cloneDeep(e))}})),Object(c.jsx)(A,{open:h,error:E,onClose:function(e,t){"clickaway"!==t&&(E||P(!0),y(!1),setTimeout(function(){return x(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))},q=function(e){var t=e.templateId,n=Object(a.useContext)(f.a),r=Object(a.useState)({}),o=Object(i.a)(r,2),_=o[0],j=o[1],E=Object(a.useState)(!1),x=Object(i.a)(E,2),O=x[0],T=x[1],h=Object(a.useState)(!1),y=Object(i.a)(h,2),z=y[0],g=y[1],w=Object(a.useState)(!1),P=Object(i.a)(w,2),k=P[0],C=P[1];return Object(a.useEffect)(function(){Object(b.b)(n.courier,t).then(function(e){return j(e.template)}).catch(console.error)},[n.courier,t]),Object(c.jsx)(u.a,null,k&&Object(c.jsx)(p.Redirect,{to:"/templates",noThrow:!0}),Object(c.jsx)(s.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(c.jsx)(m.a,{item:!0},Object(c.jsx)(l.Button,{variant:"contained",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",scheme:"blue",icon:Object(c.jsx)(d.CheckIcon,null),onClick:function(){Object(b.d)(n.courier,t,_).then(function(){return g(!0)}).catch(function(){g(!0),T(!0)})}}))),Object(c.jsx)(m.a,{css:function(e){return{maxWidth:e.maxTemplateWidth,margin:e.spacing(4),position:"relative",opacity:z?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:z?"none":"initial"}}},!v.a.isEmpty(_)&&Object(c.jsx)(S.TemplateEditor,{initialState:_,css:function(e){return{background:e.colors.main}},onChange:function(e){j(v.a.cloneDeep(e))}})),Object(c.jsx)(A,{open:z,error:O,onClose:function(e,t){"clickaway"!==t&&(O||C(!0),g(!1),setTimeout(function(){return T(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))};n.d(t,"TemplateList",function(){return y}),n.d(t,"CreateTemplate",function(){return D}),n.d(t,"EditTemplate",function(){return q})}}]);
//# sourceMappingURL=2.324a3716.chunk.js.map