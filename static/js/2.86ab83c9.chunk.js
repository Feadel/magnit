(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{259:function(t,e,n){"use strict";n.r(e);var c=n(119),a=n(97),r=n(12),o=n(0),i=n(254),s=n(253),u=n(55),j=n(252),l=n(56),b=n(258),p=n(120),d=n(118),O=n(133),f=n(109),m=n(88),x=n(20),h=n.n(x),g=n(121),w=[{key:"title",sortable:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},{key:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{key:"createdAt",label:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"},{key:"updatedAt",label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"}],y=function(){var t=Object(o.useContext)(d.a),e=Object(o.useState)([]),n=Object(a.a)(e,2),x=n[0],y=n[1],k=Object(o.useState)({redirect:!1,to:""}),v=Object(a.a)(k,2),T=v[0],A=v[1];Object(o.useEffect)(function(){Object(p.c)(t.courier).then(function(t){t.templates=t.templates.map(function(t){return Object(c.a)({},t,{createdAt:Object(g.getFriendlyDate)(new Date(t.createdAt)),updatedAt:Object(g.getFriendlyDate)(new Date(t.updatedAt))})}),y(t.templates)}).catch(console.error)},[t.courier]);var C=!x.length;return Object(r.jsx)(s.a,null,T.redirect&&Object(r.jsx)(u.Redirect,{to:"templates/edit/".concat(T.to),noThrow:!0}),Object(r.jsx)(i.a,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432"},Object(r.jsx)(O.a,{item:!0,hidden:C},Object(r.jsx)(j.Button,{component:u.Link,to:"create",variant:"contained",scheme:"blue"},Object(r.jsx)(l.AddIcon,null),Object(r.jsx)(f.a,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d")))),C&&Object(r.jsx)(b.a,{title:"\u0428\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435\u0442",actionName:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d",button:Object(r.jsx)(j.Button,{component:u.Link,to:"create",scheme:"blue"},Object(r.jsx)(l.AddIcon,null),Object(r.jsx)(f.a,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d")),description:"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443"}),!C&&Object(r.jsx)(m.a,{square:!0,css:function(t){return{margin:t.spacing(3),boxShadow:"0 0 ".concat(t.spacing(2)," ").concat(t.colors.lightGray," !important")}}},Object(r.jsx)(O.a,{container:!0,direction:"row",css:function(t){return{marginTop:t.spacing(2)}}},Object(r.jsx)(O.a,{container:!0,direction:"column",css:function(t){return{padding:t.spacing(3)}}},Object(r.jsx)(O.a,{container:!0,direction:"row",spacing:2},Object(r.jsx)(O.a,{item:!0,xs:!0},Object(r.jsx)(j.InputField,{placeholder:"\u041f\u043e\u0438\u0441\u043a ...",fullWidth:!0,css:function(t){return{borderRadius:t.radius(5),background:t.colors.white,border:"1px solid ".concat(t.colors.lightGray),transition:"border 0.25s ease-in-out",cursor:"pointer",":hover, :active":{border:"1px solid ".concat(t.colors.primary)},div:{":before, :after":{border:"none !important"}},input:{padding:"".concat(t.spacing(2)," ").concat(t.spacing(4))}}}}))),Object(r.jsx)(O.a,{item:!0,css:function(t){return{padding:t.spacing(3)}}},Object(r.jsx)(j.TableWrapper,{columns:w,data:x,onRowClick:function(t){h.a.isObject(t)&&h.a.has(t,"id")&&A({redirect:!0,to:h.a.get(t,"id")})}}))))))},k=n(14),v=n.n(k),T=n(17),A=n(46),C=n(255),S=n(122),E=function(){var t=Object(o.useContext)(d.a),e=Object(o.useState)({}),n=Object(a.a)(e,2),b=n[0],m=n[1],x=Object(o.useState)(!1),g=Object(a.a)(x,2),w=g[0],y=g[1],k=Object(o.useState)(!1),E=Object(a.a)(k,2),D=E[0],I=E[1],W=Object(o.useState)(!1),F=Object(a.a)(W,2),R=F[0],B=F[1];function L(){return(L=Object(T.a)(v.a.mark(function e(n){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(S.b)(t.courier,n).then(function(t){return Object(c.a)({},t,{filename:"".concat("http://91.144.161.208:1337","/").concat(t.filename)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(r.jsx)(s.a,null,R&&Object(r.jsx)(u.Redirect,{to:"/templates",noThrow:!0}),Object(r.jsx)(i.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(r.jsx)(O.a,{item:!0},Object(r.jsx)(j.Button,{variant:"contained",scheme:"blue",onClick:function(){Object(p.a)(t.courier,b).then(function(){return I(!0)}).catch(function(){I(!0),y(!0)})}},Object(r.jsx)(l.CheckIcon,null),Object(r.jsx)(f.a,null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))),Object(r.jsx)(O.a,{css:function(t){return{maxWidth:t.maxTemplateWidth,margin:t.spacing(4),position:"relative",opacity:D?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:D?"none":"initial"}}},Object(r.jsx)(A.TemplateEditor,{css:function(t){return{background:t.colors.main}},onChange:function(t){m(h.a.cloneDeep(t))},onAddAsset:function(t){return L.apply(this,arguments)}})),Object(r.jsx)(C.a,{open:D,error:w,onClose:function(t,e){"clickaway"!==e&&(w||B(!0),I(!1),setTimeout(function(){return y(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))},D=n(74),I=function(t){var e=t.templateId,n=Object(o.useContext)(d.a),b=Object(o.useState)({}),p=Object(a.a)(b,2),m=p[0],x=p[1],g=Object(o.useState)(!1),w=Object(a.a)(g,2),y=w[0],k=w[1],S=Object(o.useState)(!1),E=Object(a.a)(S,2),I=E[0],W=E[1],F=Object(o.useState)(!1),R=Object(a.a)(F,2),B=R[0],L=R[1];function G(){return(G=Object(T.a)(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(D.uploadFile)(n.courier,e).then(function(t){return Object(c.a)({},t,{filename:"".concat("http://91.144.161.208:1337","/").concat(t.filename)})}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function J(){return(J=Object(T.a)(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(D.deleteFile)(n.courier,e));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}return Object(o.useEffect)(function(){Object(D.getTemplate)(n.courier,e).then(function(t){return x(t.template)}).catch(console.error)},[n.courier,e]),Object(r.jsx)(s.a,null,B&&Object(r.jsx)(u.Redirect,{to:"/templates",noThrow:!0}),Object(r.jsx)(i.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(r.jsx)(O.a,{item:!0},Object(r.jsx)(j.Button,{variant:"contained",scheme:"blue",onClick:function(){Object(D.updateTemplate)(n.courier,e,m).then(function(){return W(!0)}).catch(function(){W(!0),k(!0)})}},Object(r.jsx)(l.CheckIcon,null),Object(r.jsx)(f.a,null,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")))),Object(r.jsx)(O.a,{css:function(t){return{maxWidth:t.maxTemplateWidth,margin:t.spacing(4),position:"relative",opacity:I?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:I?"none":"initial"}}},!h.a.isEmpty(m)&&Object(r.jsx)(A.TemplateEditor,{initialState:m,css:function(t){return{background:t.colors.main}},onChange:function(t){x(h.a.cloneDeep(t))},onAddAsset:function(t){return G.apply(this,arguments)},onDeleteAsset:function(t){return J.apply(this,arguments)}})),Object(r.jsx)(C.a,{open:I,error:y,onClose:function(t,e){"clickaway"!==e&&(y||L(!0),W(!1),setTimeout(function(){return k(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))};n.d(e,"TemplateList",function(){return y}),n.d(e,"CreateTemplate",function(){return E}),n.d(e,"EditTemplate",function(){return I})}}]);
//# sourceMappingURL=2.86ab83c9.chunk.js.map