(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{259:function(t,e,n){"use strict";n.r(e);var c=n(50),o=n(144),a=n(98),r=n(11),i=n(0),s=n(255),u=n(254),j=n(60),b=n(253),l=n(56),O=n(256),p=n(120),d=n(121),x=n(131),m=n(88),f=n(28),g=n.n(f);function h(t){var e=v(t.getDate()),n=v(t.getMonth()+1),c=t.getFullYear();return"".concat(e,".").concat(n,".").concat(c)}function v(t){return 1===t.toString().length?"0".concat(t):t.toString()}function w(){var t=Object(c.a)(["\n                                width: 180px;\n                            "]);return w=function(){return t},t}function C(){var t=Object(c.a)(["\n                            width: 180px;\n                        "]);return C=function(){return t},t}var S=[{id:"title",sortable:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},{id:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{id:"createdAt",label:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"},{id:"updatedAt",label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"}],k=function(){var t=Object(i.useContext)(d.a),e=Object(i.useState)([]),n=Object(a.a)(e,2),c=n[0],f=n[1],v=Object(i.useState)({redirect:!1,to:""}),k=Object(a.a)(v,2),T=k[0],y=k[1];Object(i.useEffect)(function(){Object(p.c)(t.courier).then(function(t){t.templates=t.templates.map(function(t){return Object(o.a)({},t,{createdAt:h(new Date(t.createdAt)),updatedAt:h(new Date(t.updatedAt))})}),f(t.templates)}).catch(console.error)},[t.courier]);var A=!c.length;return Object(r.jsx)(u.a,null,T.redirect&&Object(r.jsx)(j.b,{to:"templates/edit/".concat(T.to),noThrow:!0}),Object(r.jsx)(s.a,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432"},Object(r.jsx)(x.a,{item:!0,hidden:A},Object(r.jsx)(b.CustomButton,{component:j.a,to:"create",variant:"contained",title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d",scheme:"blue",icon:Object(r.jsx)(l.AddIcon,null),css:Object(r.css)(C())}))),A&&Object(r.jsx)(O.a,{title:"\u0428\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435\u0442",actionName:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d",button:Object(r.jsx)(b.CustomButton,{component:j.a,to:"create",icon:Object(r.jsx)(l.AddIcon,null),title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d",css:Object(r.css)(w())}),description:"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443"}),!A&&Object(r.jsx)(m.a,{square:!0,css:function(t){return{margin:t.spacing(3),boxShadow:"0px 0px ".concat(t.spacing(2)," ").concat(t.colors.lightGray," !important")}}},Object(r.jsx)(x.a,{container:!0,direction:"row",css:function(t){return{marginTop:t.spacing(2)}}},Object(r.jsx)(x.a,{container:!0,direction:"column",css:function(t){return{padding:t.spacing(3)}}},Object(r.jsx)(x.a,{container:!0,direction:"row",spacing:2},Object(r.jsx)(x.a,{item:!0,xs:!0},Object(r.jsx)(b.InputField,{placeholder:"\u041f\u043e\u0438\u0441\u043a ...",fullWidth:!0,css:function(t){return{borderRadius:t.radius(5),background:t.colors.white,border:"1px solid ".concat(t.colors.lightGray),transition:"border 0.25s ease-in-out",cursor:"pointer",":hover, :active":{border:"1px solid ".concat(t.colors.primary)},div:{":before, :after":{border:"none !important"}},input:{padding:"".concat(t.spacing(2)," ").concat(t.spacing(4))}}}}))),Object(r.jsx)(x.a,{item:!0,css:function(t){return{padding:t.spacing(3)}}},Object(r.jsx)(b.TableWrapper,{columns:S,data:c,onRowClick:function(t){g.a.isObject(t)&&g.a.has(t,"id")&&y({redirect:!0,to:g.a.get(t,"id")})}}))))))},T=n(61),y=n(257),A=n(135),E=n(114),D=n(128),I=n(138),W=n(136),B=n(137);function R(){var t=Object(c.a)(["\n                            display: flex;\n                            align-items: center;\n                        "]);return R=function(){return t},t}var J=function(t){var e=t.messages,n=t.error,c=t.open,o=Object(y.a)(t,["messages","error","open"]);return Object(r.jsx)(A.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:c,autoHideDuration:2500,onClose:o.onClose},Object(r.jsx)(E.a,{css:function(t){return{background:n?t.colors.red:t.colors.green,boxShadow:"0 4px 8px ".concat(n?t.colors.red:t.colors.green,"50")}},message:Object(r.jsx)("span",{css:Object(r.css)(R())},n?Object(r.jsx)(I.a,{css:function(t){return{marginRight:t.spacing(1)}}}):Object(r.jsx)(W.a,{css:function(t){return{marginRight:t.spacing(1)}}}),n?e.error:e.success),action:[Object(r.jsx)(D.a,{key:"close",color:"inherit",onClick:o.onClose},Object(r.jsx)(B.a,null))]}))},F=function(){var t=Object(i.useContext)(d.a),e=Object(i.useState)({}),n=Object(a.a)(e,2),c=n[0],o=n[1],O=Object(i.useState)(!1),m=Object(a.a)(O,2),f=m[0],h=m[1],v=Object(i.useState)(!1),w=Object(a.a)(v,2),C=w[0],S=w[1],k=Object(i.useState)(!1),y=Object(a.a)(k,2),A=y[0],E=y[1];return Object(r.jsx)(u.a,null,A&&Object(r.jsx)(j.b,{to:"/templates",noThrow:!0}),Object(r.jsx)(s.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(r.jsx)(x.a,{item:!0},Object(r.jsx)(b.CustomButton,{variant:"contained",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",scheme:"blue",icon:Object(r.jsx)(l.CheckIcon,null),onClick:function(){Object(p.a)(t.courier,c).then(function(){return S(!0)}).catch(function(){S(!0),h(!0)})}}))),Object(r.jsx)(x.a,{css:function(t){return{maxWidth:t.maxTemplateWidth,margin:t.spacing(4),position:"relative",opacity:C?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:C?"none":"initial"}}},Object(r.jsx)(T.TemplateEditor,{css:function(t){return{background:t.colors.main}},onChange:function(t){o(g.a.cloneDeep(t))}})),Object(r.jsx)(J,{open:C,error:f,onClose:function(t,e){"clickaway"!==e&&(f||E(!0),S(!1),setTimeout(function(){return h(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))},G=function(t){var e=t.templateId,n=Object(i.useContext)(d.a),c=Object(i.useState)({}),o=Object(a.a)(c,2),O=o[0],m=o[1],f=Object(i.useState)(!1),h=Object(a.a)(f,2),v=h[0],w=h[1],C=Object(i.useState)(!1),S=Object(a.a)(C,2),k=S[0],y=S[1],A=Object(i.useState)(!1),E=Object(a.a)(A,2),D=E[0],I=E[1];return Object(i.useEffect)(function(){Object(p.b)(n.courier,e).then(function(t){return m(JSON.parse(t.template))}).catch(console.error)},[n.courier,e]),Object(r.jsx)(u.a,null,D&&Object(r.jsx)(j.b,{to:"/templates",noThrow:!0}),Object(r.jsx)(s.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(r.jsx)(x.a,{item:!0},Object(r.jsx)(b.CustomButton,{variant:"contained",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",scheme:"blue",icon:Object(r.jsx)(l.CheckIcon,null),onClick:function(){Object(p.d)(n.courier,e,O).then(function(){return y(!0)}).catch(function(){y(!0),w(!0)})}}))),Object(r.jsx)(x.a,{css:function(t){return{maxWidth:t.maxTemplateWidth,margin:t.spacing(4),position:"relative",opacity:k?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:k?"none":"initial"}}},!g.a.isEmpty(O)&&Object(r.jsx)(T.TemplateEditor,{initialState:O,css:function(t){return{background:t.colors.main}},onChange:function(t){m(g.a.cloneDeep(t))}})),Object(r.jsx)(J,{open:k,error:v,onClose:function(t,e){"clickaway"!==e&&(v||I(!0),y(!1),setTimeout(function(){return w(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))};n.d(e,"TemplateList",function(){return k}),n.d(e,"CreateTemplate",function(){return F}),n.d(e,"EditTemplate",function(){return G})}}]);
//# sourceMappingURL=2.5a6fbbef.chunk.js.map