(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{258:function(t,e,n){"use strict";n.r(e);var c=n(120),a=n(97),o=n(12),i=n(0),r=n(253),s=n(252),u=n(55),j=n(251),b=n(56),l=n(257),d=n(119),O=n(118),p=n(132),m=n(88),x=n(20),f=n.n(x),h=n(121),g=[{key:"title",sortable:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},{key:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{key:"createdAt",label:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"},{key:"updatedAt",label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"}],k=function(){var t=Object(i.useContext)(O.a),e=Object(i.useState)([]),n=Object(a.a)(e,2),x=n[0],k=n[1],w=Object(i.useState)({redirect:!1,to:""}),y=Object(a.a)(w,2),v=y[0],T=y[1];Object(i.useEffect)(function(){Object(d.c)(t.courier).then(function(t){t.templates=t.templates.map(function(t){return Object(c.a)({},t,{createdAt:Object(h.getFriendlyDate)(new Date(t.createdAt)),updatedAt:Object(h.getFriendlyDate)(new Date(t.updatedAt))})}),k(t.templates)}).catch(console.error)},[t.courier]);var C=!x.length;return Object(o.jsx)(s.a,null,v.redirect&&Object(o.jsx)(u.Redirect,{to:"templates/edit/".concat(v.to),noThrow:!0}),Object(o.jsx)(r.a,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432"},Object(o.jsx)(p.a,{item:!0,hidden:C},Object(o.jsx)(j.Button,{component:u.Link,to:"create",variant:"contained",title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d",scheme:"blue",icon:Object(o.jsx)(b.AddIcon,null)}))),C&&Object(o.jsx)(l.a,{title:"\u0428\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435\u0442",actionName:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d",button:Object(o.jsx)(j.Button,{component:u.Link,to:"create",icon:Object(o.jsx)(b.AddIcon,null),title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d"}),description:"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443"}),!C&&Object(o.jsx)(m.a,{square:!0,css:function(t){return{margin:t.spacing(3),boxShadow:"0 0 ".concat(t.spacing(2)," ").concat(t.colors.lightGray," !important")}}},Object(o.jsx)(p.a,{container:!0,direction:"row",css:function(t){return{marginTop:t.spacing(2)}}},Object(o.jsx)(p.a,{container:!0,direction:"column",css:function(t){return{padding:t.spacing(3)}}},Object(o.jsx)(p.a,{container:!0,direction:"row",spacing:2},Object(o.jsx)(p.a,{item:!0,xs:!0},Object(o.jsx)(j.InputField,{placeholder:"\u041f\u043e\u0438\u0441\u043a ...",fullWidth:!0,css:function(t){return{borderRadius:t.radius(5),background:t.colors.white,border:"1px solid ".concat(t.colors.lightGray),transition:"border 0.25s ease-in-out",cursor:"pointer",":hover, :active":{border:"1px solid ".concat(t.colors.primary)},div:{":before, :after":{border:"none !important"}},input:{padding:"".concat(t.spacing(2)," ").concat(t.spacing(4))}}}}))),Object(o.jsx)(p.a,{item:!0,css:function(t){return{padding:t.spacing(3)}}},Object(o.jsx)(j.TableWrapper,{columns:g,data:x,onRowClick:function(t){f.a.isObject(t)&&f.a.has(t,"id")&&T({redirect:!0,to:f.a.get(t,"id")})}}))))))},w=n(46),y=n(254),v=function(){var t=Object(i.useContext)(O.a),e=Object(i.useState)({}),n=Object(a.a)(e,2),c=n[0],l=n[1],m=Object(i.useState)(!1),x=Object(a.a)(m,2),h=x[0],g=x[1],k=Object(i.useState)(!1),v=Object(a.a)(k,2),T=v[0],C=v[1],S=Object(i.useState)(!1),A=Object(a.a)(S,2),E=A[0],D=A[1];return Object(o.jsx)(s.a,null,E&&Object(o.jsx)(u.Redirect,{to:"/templates",noThrow:!0}),Object(o.jsx)(r.a,{title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(o.jsx)(p.a,{item:!0},Object(o.jsx)(j.Button,{variant:"contained",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",scheme:"blue",icon:Object(o.jsx)(b.CheckIcon,null),onClick:function(){Object(d.a)(t.courier,c).then(function(){return C(!0)}).catch(function(){C(!0),g(!0)})}}))),Object(o.jsx)(p.a,{css:function(t){return{maxWidth:t.maxTemplateWidth,margin:t.spacing(4),position:"relative",opacity:T?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:T?"none":"initial"}}},Object(o.jsx)(w.TemplateEditor,{css:function(t){return{background:t.colors.main}},onChange:function(t){l(f.a.cloneDeep(t))}})),Object(o.jsx)(y.a,{open:T,error:h,onClose:function(t,e){"clickaway"!==e&&(h||D(!0),C(!1),setTimeout(function(){return g(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))},T=function(t){var e=t.templateId,n=Object(i.useContext)(O.a),c=Object(i.useState)({}),l=Object(a.a)(c,2),m=l[0],x=l[1],h=Object(i.useState)(!1),g=Object(a.a)(h,2),k=g[0],v=g[1],T=Object(i.useState)(!1),C=Object(a.a)(T,2),S=C[0],A=C[1],E=Object(i.useState)(!1),D=Object(a.a)(E,2),I=D[0],W=D[1];return Object(i.useEffect)(function(){Object(d.b)(n.courier,e).then(function(t){return x(t.template)}).catch(console.error)},[n.courier,e]),Object(o.jsx)(s.a,null,I&&Object(o.jsx)(u.Redirect,{to:"/templates",noThrow:!0}),Object(o.jsx)(r.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430"},Object(o.jsx)(p.a,{item:!0},Object(o.jsx)(j.Button,{variant:"contained",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",scheme:"blue",icon:Object(o.jsx)(b.CheckIcon,null),onClick:function(){Object(d.d)(n.courier,e,m).then(function(){return A(!0)}).catch(function(){A(!0),v(!0)})}}))),Object(o.jsx)(p.a,{css:function(t){return{maxWidth:t.maxTemplateWidth,margin:t.spacing(4),position:"relative",opacity:S?.5:1,transition:"opacity 0.3s ease-in-out",pointerEvents:S?"none":"initial"}}},!f.a.isEmpty(m)&&Object(o.jsx)(w.TemplateEditor,{initialState:m,css:function(t){return{background:t.colors.main}},onChange:function(t){x(f.a.cloneDeep(t))}})),Object(o.jsx)(y.a,{open:S,error:k,onClose:function(t,e){"clickaway"!==e&&(k||W(!0),A(!1),setTimeout(function(){return v(!1)},100))},messages:{success:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d!",error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430!"}}))};n.d(e,"TemplateList",function(){return k}),n.d(e,"CreateTemplate",function(){return v}),n.d(e,"EditTemplate",function(){return T})}}]);
//# sourceMappingURL=2.1eb7defe.chunk.js.map