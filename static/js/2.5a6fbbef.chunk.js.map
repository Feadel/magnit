{"version":3,"sources":["services/date/index.ts","containers/templates/TemplateList.tsx","components/snackbar/Snackbar.tsx","containers/templates/CreateTemplate.tsx","containers/templates/EditTemplate.tsx","containers/templates/index.ts"],"names":["getFriendlyDate","date","day","normalizeDateNumber","getDate","month","getMonth","year","getFullYear","concat","number","toString","length","columns","id","sortable","label","TemplateList","context","useContext","AppContext","_useState","useState","_useState2","Object","slicedToArray","rows","setRows","_useState3","redirect","to","_useState4","setRedirect","useEffect","getTemplates","courier","then","response","templates","map","template","objectSpread","createdAt","Date","updatedAt","catch","console","error","empty","core_browser_esm","section_layout","es","noThrow","section_title","title","Grid","item","hidden","dist","component","Link","variant","scheme","icon","icons_dist","css","_templateObject","list","actionName","button","_templateObject2","description","Paper","square","theme","margin","spacing","boxShadow","colors","lightGray","container","direction","marginTop","padding","xs","placeholder","fullWidth","borderRadius","radius","background","white","border","transition","cursor",":hover, :active","primary","div",":before, :after","input","data","onRowClick","row","_","isObject","has","get","Snackbar","_ref","messages","open","props","objectWithoutProperties","Snackbar_Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","SnackbarContent","red","green","message","Snackbar_templateObject","Error","marginRight","CheckCircle","success","action","IconButton","key","color","onClick","Close","CreateTemplate","setTemplate","setError","_useState5","_useState6","setOpen","_useState7","_useState8","createTemplate","maxWidth","maxTemplateWidth","position","opacity","pointerEvents","template_editor_dist","main","onChange","cloneDeep","snackbar_Snackbar_Snackbar","event","reason","setTimeout","EditTemplate","templateId","getTemplate","JSON","parse","updateTemplate","isEmpty","initialState","__webpack_require__","d","__webpack_exports__","TemplateList_TemplateList","CreateTemplate_CreateTemplate","EditTemplate_EditTemplate"],"mappings":"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","file":"static/js/2.5a6fbbef.chunk.js","sourcesContent":["export function getFriendlyDate(date: Date): string {\n    const day = normalizeDateNumber(date.getDate());\n    const month = normalizeDateNumber(date.getMonth() + 1);\n    const year = date.getFullYear();\n    return `${day}.${month}.${year}`;\n}\n\nfunction normalizeDateNumber(number: number): string {\n    if (number.toString().length === 1) {\n        return `0${number}`;\n    }\n    return number.toString();\n}\n","/** @jsx jsx */\n\nimport { css, jsx } from \"@emotion/core\";\nimport * as React from \"react\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { SectionTitle } from \"components/section-title\";\nimport { SectionLayout } from \"components/section-layout\";\nimport { Link, Redirect } from \"@reach/router\";\nimport { CustomButton, IColumn, InputField, TableWrapper } from \"@magnit/components\";\nimport { AddIcon } from \"@magnit/icons\";\nimport { EmptyList } from \"components/list\";\nimport { getTemplates } from \"services/api/templates\";\nimport { AppContext } from \"context\";\nimport { Grid, Paper } from \"@material-ui/core\";\nimport _ from \"lodash\";\nimport { getFriendlyDate } from \"services/date\";\n\nconst columns: IColumn[] = [\n    { id: \"title\", sortable: true, label: \"Название шаблона\" },\n    { id: \"description\", label: \"Описание\" },\n    { id: \"createdAt\", label: \"Дата создания\" },\n    { id: \"updatedAt\", label: \"Дата редактирования\" },\n];\n\nexport const TemplateList: React.FC = () => {\n    const context = useContext(AppContext);\n    const [rows, setRows] = useState<object[]>([]);\n    const [redirect, setRedirect] = useState({ redirect: false, to: \"\" });\n\n    useEffect(() => {\n        getTemplates(context.courier)\n            .then(response => {\n                response.templates = response.templates.map(template => {\n                    return {\n                        ...template,\n                        createdAt: getFriendlyDate(new Date(template.createdAt)),\n                        updatedAt: getFriendlyDate(new Date(template.updatedAt)),\n                    };\n                });\n                setRows(response.templates);\n            })\n            .catch(console.error);\n    }, [context.courier]);\n\n    function onRowClick(row?: object) {\n        if (!_.isObject(row) || !_.has(row, \"id\")) {\n            return;\n        }\n        setRedirect({ redirect: true, to: _.get(row, \"id\") });\n    }\n\n    const empty = !rows.length;\n\n    return (\n        <SectionLayout>\n            {redirect.redirect && <Redirect to={`templates/edit/${redirect.to}`} noThrow />}\n            <SectionTitle title=\"Список шаблонов\">\n                <Grid item hidden={empty}>\n                    <CustomButton\n                        component={Link}\n                        to=\"create\"\n                        variant=\"contained\"\n                        title=\"Создать шаблон\"\n                        scheme=\"blue\"\n                        icon={<AddIcon />}\n                        css={css`\n                            width: 180px;\n                        `}\n                    />\n                </Grid>\n            </SectionTitle>\n            {empty && (\n                <EmptyList\n                    title={\"Шаблонов нет\"}\n                    actionName={\"Создать шаблон\"}\n                    button={\n                        <CustomButton\n                            component={Link}\n                            to=\"create\"\n                            icon={<AddIcon />}\n                            title={\"Создать шаблон\"}\n                            css={css`\n                                width: 180px;\n                            `}\n                        />\n                    }\n                    description={\"Для создания шаблона нажмите кнопку\"}\n                />\n            )}\n            {!empty && (\n                <Paper\n                    square={true}\n                    css={theme => ({\n                        margin: theme.spacing(3),\n                        boxShadow: `0px 0px ${theme.spacing(2)} ${\n                            theme.colors.lightGray\n                        } !important`,\n                    })}\n                >\n                    <Grid\n                        container\n                        direction=\"row\"\n                        css={theme => ({ marginTop: theme.spacing(2) })}\n                    >\n                        <Grid\n                            container\n                            direction=\"column\"\n                            css={theme => ({ padding: theme.spacing(3) })}\n                        >\n                            <Grid container direction=\"row\" spacing={2}>\n                                <Grid item xs>\n                                    <InputField\n                                        placeholder=\"Поиск ...\"\n                                        fullWidth\n                                        css={theme => ({\n                                            borderRadius: theme.radius(5),\n                                            background: theme.colors.white,\n                                            border: `1px solid ${theme.colors.lightGray}`,\n                                            transition: \"border 0.25s ease-in-out\",\n                                            cursor: \"pointer\",\n                                            \":hover, :active\": {\n                                                border: `1px solid ${theme.colors.primary}`,\n                                            },\n                                            div: {\n                                                \":before, :after\": {\n                                                    border: \"none !important\",\n                                                },\n                                            },\n                                            input: {\n                                                padding: `${theme.spacing(2)} ${theme.spacing(4)}`,\n                                            },\n                                        })}\n                                    />\n                                </Grid>\n                            </Grid>\n                            <Grid item css={theme => ({ padding: theme.spacing(3) })}>\n                                <TableWrapper\n                                    columns={columns}\n                                    data={rows}\n                                    onRowClick={onRowClick}\n                                />\n                            </Grid>\n                        </Grid>\n                    </Grid>\n                </Paper>\n            )}\n        </SectionLayout>\n    );\n};\n","/** @jsx jsx */\n\nimport * as React from \"react\";\nimport { IconButton, Snackbar as MaterialSnackbar, SnackbarContent } from \"@material-ui/core\";\nimport { css, jsx } from \"@emotion/core\";\nimport {\n    CheckCircle as CheckCircleIcon,\n    Close as CloseIcon,\n    Error as ErrorIcon,\n} from \"@material-ui/icons\";\n\ninterface ISnackbarProps {\n    messages: {\n        success: string;\n        error: string;\n    };\n    open: boolean;\n    error: boolean;\n\n    onClose?(event?: React.SyntheticEvent, reason?: string): void;\n}\n\nexport const Snackbar: React.FC<ISnackbarProps> = ({ messages, error, open, ...props }) => {\n    return (\n        <MaterialSnackbar\n            anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"right\",\n            }}\n            open={open}\n            autoHideDuration={2500}\n            onClose={props.onClose}\n        >\n            <SnackbarContent\n                css={theme => ({\n                    background: error ? theme.colors.red : theme.colors.green,\n                    boxShadow: `0 4px 8px ${error ? theme.colors.red : theme.colors.green}50`,\n                })}\n                message={\n                    <span\n                        css={css`\n                            display: flex;\n                            align-items: center;\n                        `}\n                    >\n                        {error ? (\n                            <ErrorIcon css={theme => ({ marginRight: theme.spacing(1) })} />\n                        ) : (\n                            <CheckCircleIcon css={theme => ({ marginRight: theme.spacing(1) })} />\n                        )}\n                        {error ? messages.error : messages.success}\n                    </span>\n                }\n                action={[\n                    <IconButton key=\"close\" color=\"inherit\" onClick={props.onClose}>\n                        <CloseIcon />\n                    </IconButton>,\n                ]}\n            />\n        </MaterialSnackbar>\n    );\n};\n","/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport * as React from \"react\";\nimport { useContext, useState } from \"react\";\nimport { SectionLayout } from \"components/section-layout\";\nimport { SectionTitle } from \"components/section-title\";\nimport { Grid } from \"@material-ui/core\";\nimport { TemplateEditor } from \"@magnit/template-editor\";\nimport { CustomButton } from \"@magnit/components\";\nimport { CheckIcon } from \"@magnit/icons\";\nimport { createTemplate } from \"services/api/templates\";\nimport { AppContext } from \"context\";\nimport { Snackbar } from \"components/snackbar\";\nimport { Redirect } from \"@reach/router\";\nimport _ from \"lodash\";\n\nexport const CreateTemplate: React.FC = () => {\n    const context = useContext(AppContext);\n    const [template, setTemplate] = useState<object>({});\n    const [error, setError] = useState(false); // success/error snackbar state\n    const [open, setOpen] = useState(false); // open/close snackbar\n    const [redirect, setRedirect] = useState(false);\n\n    function onTemplateChange(template: object) {\n        setTemplate(_.cloneDeep(template));\n    }\n\n    function onSnackbarClose(event?: React.SyntheticEvent, reason?: string) {\n        if (reason === \"clickaway\") {\n            return;\n        }\n        if (!error) {\n            setRedirect(true);\n        }\n        setOpen(false);\n        // wait till animation ends\n        setTimeout(() => setError(false), 100);\n    }\n\n    function onTemplateSave() {\n        createTemplate(context.courier, template)\n            .then(() => setOpen(true))\n            .catch(() => {\n                setOpen(true);\n                setError(true);\n            });\n    }\n\n    return (\n        <SectionLayout>\n            {redirect && <Redirect to={\"/templates\"} noThrow />}\n            <SectionTitle title=\"Создание шаблона\">\n                <Grid item>\n                    <CustomButton\n                        variant=\"contained\"\n                        title=\"Сохранить\"\n                        scheme=\"blue\"\n                        icon={<CheckIcon />}\n                        onClick={onTemplateSave}\n                    />\n                </Grid>\n            </SectionTitle>\n            <Grid\n                css={theme => ({\n                    maxWidth: theme.maxTemplateWidth,\n                    margin: theme.spacing(4),\n                    position: \"relative\",\n                    opacity: open ? 0.5 : 1,\n                    transition: \"opacity 0.3s ease-in-out\",\n                    pointerEvents: open ? \"none\" : \"initial\",\n                })}\n            >\n                <TemplateEditor\n                    css={theme => ({ background: theme.colors.main })}\n                    onChange={onTemplateChange}\n                />\n            </Grid>\n            <Snackbar\n                open={open}\n                error={error}\n                onClose={onSnackbarClose}\n                messages={{\n                    success: \"Шаблон успешно сохранён!\",\n                    error: \"Ошибка сохранения шаблона!\",\n                }}\n            />\n        </SectionLayout>\n    );\n};\n","/** @jsx jsx */\n\nimport { jsx } from \"@emotion/core\";\nimport * as React from \"react\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { SectionLayout } from \"components/section-layout\";\nimport { SectionTitle } from \"components/section-title\";\nimport { Grid } from \"@material-ui/core\";\nimport { ITemplate, TemplateEditor } from \"@magnit/template-editor\";\nimport { CustomButton } from \"@magnit/components\";\nimport { CheckIcon } from \"@magnit/icons\";\nimport { getTemplate, updateTemplate } from \"services/api/templates\";\nimport { AppContext } from \"context\";\nimport { Snackbar } from \"components/snackbar\";\nimport { Redirect } from \"@reach/router\";\nimport _ from \"lodash\";\n\ninterface IEditTemplateProps {\n    templateId: number;\n}\n\nexport const EditTemplate: React.FC<IEditTemplateProps> = ({ templateId }) => {\n    const context = useContext(AppContext);\n    const [template, setTemplate] = useState<object>({});\n    const [error, setError] = useState(false); // success/error snackbar state\n    const [open, setOpen] = useState(false); // open/close snackbar\n    const [redirect, setRedirect] = useState(false);\n\n    useEffect(() => {\n        getTemplate(context.courier, templateId)\n            .then(response => setTemplate(JSON.parse(response.template)))\n            .catch(console.error);\n    }, [context.courier, templateId]);\n\n    function onTemplateChange(template: object) {\n        setTemplate(_.cloneDeep(template));\n    }\n\n    function onSnackbarClose(event?: React.SyntheticEvent, reason?: string) {\n        if (reason === \"clickaway\") {\n            return;\n        }\n        if (!error) {\n            setRedirect(true);\n        }\n        setOpen(false);\n        // wait till animation ends\n        setTimeout(() => setError(false), 100);\n    }\n\n    function onTemplateSave() {\n        updateTemplate(context.courier, templateId, template)\n            .then(() => setOpen(true))\n            .catch(() => {\n                setOpen(true);\n                setError(true);\n            });\n    }\n\n    return (\n        <SectionLayout>\n            {redirect && <Redirect to={\"/templates\"} noThrow />}\n            <SectionTitle title=\"Редактирование шаблона\">\n                <Grid item>\n                    <CustomButton\n                        variant=\"contained\"\n                        title=\"Обновить\"\n                        scheme=\"blue\"\n                        icon={<CheckIcon />}\n                        onClick={onTemplateSave}\n                    />\n                </Grid>\n            </SectionTitle>\n            <Grid\n                css={theme => ({\n                    maxWidth: theme.maxTemplateWidth,\n                    margin: theme.spacing(4),\n                    position: \"relative\",\n                    opacity: open ? 0.5 : 1,\n                    transition: \"opacity 0.3s ease-in-out\",\n                    pointerEvents: open ? \"none\" : \"initial\",\n                })}\n            >\n                {!_.isEmpty(template) && (\n                    <TemplateEditor\n                        initialState={(template as unknown) as ITemplate}\n                        css={theme => ({ background: theme.colors.main })}\n                        onChange={onTemplateChange}\n                    />\n                )}\n            </Grid>\n            <Snackbar\n                open={open}\n                error={error}\n                onClose={onSnackbarClose}\n                messages={{\n                    success: \"Шаблон успешно обновлён!\",\n                    error: \"Ошибка обновления шаблона!\",\n                }}\n            />\n        </SectionLayout>\n    );\n};\n","export * from \"./TemplateList\";\nexport * from \"./CreateTemplate\";\nexport * from \"./EditTemplate\";\n"],"sourceRoot":""}